<?php // Protected by PHPDefender.com ?>
<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die(); ?> <? IncludeTemplateLangFile(__FILE__); global $USER, $APPLICATION, $IIIIIIIIIII1; if(!CModule::IncludeModule("iblock")) return; $arFilter = Array( "IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"], "IBLOCK_ID" => $arParams["IBLOCK_ID"], "ACTIVE" => "Y", "ID" => $arResult["VARIABLES"]["SECTION_ID"] ); $IIIIIIIIII1I = CIBlockSection::GetList(Array("SORT"=>"ASC", "PROPERTY_PRIORITY"=>"ASC"), $arFilter, false); while($arFields1 = $IIIIIIIIII1I->Fetch()) { if(!$arFields1) require("sections.php"); else{ $APPLICATION->SetTitle($arFields1["NAME"]); $this_SECTION_ID = $arResult["VARIABLES"]["SECTION_ID"]; $arSORT_INDEX = array(); $arSelect = Array("ID", "NAME", "SORT"); $arFilter = Array( "IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"], "IBLOCK_ID" => $arParams["IBLOCK_ID"], "ACTIVE" => "Y", "SECTION_ID" => $this_SECTION_ID ); $IIIIIIIIIlI1 = CIBlockElement::GetList(Array("SORT"=>"ASC", "PROPERTY_PRIORITY"=>"ASC"), $arFilter, false, Array("nPageSize"=>50), $arSelect); while($arSORT = $IIIIIIIIIlI1->Fetch()) { if ($arSORT["NAME"] == " " || $arSORT["NAME"] == "-" || $arSORT["NAME"] == "_"){ $db_props = CIBlockElement::GetProperty($arParams["IBLOCK_ID"], $arSORT["ID"], "sort", "asc",array("CODE"=>"STR_OFFICER")); while($ar_props = $db_props->Fetch()){ $arSelect = Array("NAME"); $arFilter = Array( "IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"], "IBLOCK_ID" => $ar_props["LINK_IBLOCK_ID"], "ACTIVE" => "Y", "ID" => $ar_props["VALUE"] ); $IIIIIIIIIl1I = CIBlockElement::GetList(0, $arFilter, false, 0, $arSelect); while($arSORT2 = $IIIIIIIIIl1I->Fetch()) $arSORT["NAME"] = $arSORT2["NAME"]; } } $arSORT_INDEX[] = array("NAME"=>$arSORT["NAME"], "SORT"=>$arSORT["SORT"], "ID"=>$arSORT["ID"]); } $arSORT_INDEX=IIIIIIIIIIII($arSORT_INDEX, array(array('key'=>'SORT','sort'=>'asc'),array('key'=>'NAME'))); while(list( $IIIIIIIIIl11, $IIIIIIIII1II ) = each($arSORT_INDEX)){ $arSelect = Array("ID", "NAME", "SORT", "DETAIL_PICTURE", "DETAIL_TEXT"); $arFilter = Array( "IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"], "IBLOCK_ID" => $arParams["IBLOCK_ID"], "ACTIVE" => "Y", "SECTION_ID" => $this_SECTION_ID, "ID" => $IIIIIIIII1II["ID"] ); $IIIIIIIII1Il = CIBlockElement::GetList(Array("SORT"=>"ASC", "PROPERTY_PRIORITY"=>"ASC"), $arFilter, false, Array("nPageSize"=>50), $arSelect); while($arResult = $IIIIIIIII1Il->Fetch()) { $db_props = CIBlockElement::GetProperty($arParams["IBLOCK_ID"], $arResult["ID"], "sort", "asc"); while($ar_props = $db_props->Fetch()) $arResult["PROPERTIES"][$ar_props["CODE"]] = $ar_props; require("bitrix/catalog.element/.default/template.php"); } } } } require("bitrix/catalog.element/.default/lang/".LANGUAGE_ID."/template.php"); $GLOBALS["BACK_PAGE"]["NAME"] = GetMessage("T_NEWS_DETAIL_BACK"); $GLOBALS["BACK_PAGE"]["URL"] = "?"; function IIIIIIIIIIII($IIIIIIIII1lI,$IIIIIIIII1ll){ foreach ($IIIIIIIII1lI as $IIIIIIIIIl11 => $IIIIIIIII1l1) { foreach ($IIIIIIIII1ll as $IIIIIIIII11I){ $IIIIIIIII11l[$IIIIIIIII11I['key']][$IIIIIIIIIl11] = $IIIIIIIII1l1[$IIIIIIIII11I['key']]; } } $IIIIIIIII111=array_keys($IIIIIIIII1lI); $IIIIIIIIlIII=0; foreach ($IIIIIIIII1ll as $IIIIIIIII11I){ if($IIIIIIIIlIII>0){$IIIIIIIIlIIl.=',';} $IIIIIIIIlIIl.='$IIIIIIIII11l['.$IIIIIIIII11I['key'].']'; if($IIIIIIIII11I['sort']){$IIIIIIIIlIIl.=',SORT_'.strtoupper($IIIIIIIII11I['sort']);} if($IIIIIIIII11I['type']){$IIIIIIIIlIIl.=',SORT_'.strtoupper($IIIIIIIII11I['type']);} $IIIIIIIIlIII++; } $IIIIIIIIlIIl.=',$IIIIIIIII111'; $IIIIIIIIlIIl='array_multisort('.$IIIIIIIIlIIl.');'; eval($IIIIIIIIlIIl); foreach($IIIIIIIII111 as $IIIIIIIIlII1){ $IIIIIIIIlIlI[$IIIIIIIIlII1]=$IIIIIIIII1lI[$IIIIIIIIlII1]; } return $IIIIIIIIlIlI; } ?>
<a href="?">Вернуться к списку</a>